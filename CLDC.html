<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLDC</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center; /* Centering the content */
            height: 100vh;
            margin: 0;
            font-family: Comic Sans MS, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, pink 25%, white 25%, white 50%, pink 50%, pink 75%, white 75%, white);
            background-size: 100px 100px; /* Make the stripes larger */
            animation: moveBackground 20s linear infinite;
            padding: 20px; /* Add padding to the body */
            box-sizing: border-box;
            overflow-y: auto; /* Enable vertical scrolling */
        }

        @keyframes moveBackground {
            0% { background-position: 0 0; }
            100% { background-position: 200px 200px; } /* Match the background size */
        }

        #cldConverter {
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 5px solid #ccc;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.8); /* Slightly transparent background */
            width: 80%; /* Expand based on window size */
            max-width: 800px;
            height: 90%; /* Fixed height */
        }

        @media (max-width: 600px) {
            #cldConverter {
                width: 100%; /* Adjust width for smaller screens */
            }

            #cldOutputContainer {
                overflow-x: auto; /* Allow horizontal scrolling if necessary */
                flex-wrap: nowrap; /* Ensure no wrapping occurs */
            }

            .outputBox {
                min-width: 300px; /* Minimum width to ensure consistent adaptation */
                max-width: 100%; /* Prevent infinite width */
                flex: none; /* Remove flex-grow */
                display: inline-block; /* Ensure inline display */
                vertical-align: top; /* Align boxes top */
            }
        }

        #cldOutputContainer {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px; /* Added margin to ensure spacing */
            height: calc(70% - 50px); /* Adjust height to fit the rest of the main content box */
        }

        textarea.scrollBox, .scrollBox {
            resize: none;
            overflow: auto;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            width: 100%; /* Expand based on parent width */
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.9); /* Slightly transparent background for output boxes */
            font-size: 18px; /* Make the font bigger */
        }

        textarea.scrollBox {
            height: 80px; /* Consistent initial height for input box */
            overflow-y: auto; /* Enable vertical scroll when necessary */
        }

        .outputBox {
            flex: 1;
            margin: 0 5px;
            height: 100%; /* Initial height to fill the container */
            overflow-y: auto; /* Enable vertical scroll when necessary */
        }
    </style>
</head>
<body>
    <div id="cldConverter">
        <h1>CLDC</h1>
        <label for="cldInput">ENTER TEXT</label>
        <textarea id="cldInput" class="scrollBox"></textarea>
        <button onclick="convertToCLD()">Convert</button>
        <div id="cldOutputContainer">
            <div class="scrollBox outputBox" id="cldDetails"></div> <!-- Details output -->
            <div class="scrollBox outputBox" id="cldResult"></div> <!-- Number CLD output -->
            <div class="scrollBox outputBox" id="cldOutput"></div> <!-- C, L, D representation output -->
        </div>
    </div>

    <script>
        function convertToCLD() {
            let inputValue = document.getElementById('cldInput').value.trim();
            let results = [];
            let details = [];
            let output = []; // New array for C, L, D representation
            let previousD = 0;
            let resultSegment = [];

            for (let i = 0; i < inputValue.length; i++) {
                let char = inputValue[i];

                if (char === " ") {
                    if (resultSegment.length > 0) {
                        results.push(resultSegment.join(' '));
                        resultSegment = [];
                    }
                    results.push(" ");
                    details.push(" ");
                    continue;
                }

                if (/[^a-zA-Z0-9]/.test(char)) {
                    if (resultSegment.length > 0) {
                        results.push(resultSegment.join(' '));
                        resultSegment = [];
                    }
                    results.push(char);
                    details.push(char);
                    output.push(char); // Add special character in output array
                    continue;
                }

                let inputNumber = parseInt(char);

                if (isNaN(inputNumber)) {
                    inputNumber = char.toUpperCase().charCodeAt(0) - 64;
                }

                inputNumber += previousD;

                let C = 10;
                let L = 0;
                let D = inputNumber;

                while (D > 4) {
                    D -= 5;
                }

                while (C + L + D < inputNumber) {
                    C += 10;
                }

                L = inputNumber - (C + D);

                const result = C + L + D;

                resultSegment.push(`${C/10} ${Math.abs(L/5)} ${D}`);
                details.push(`${char} ; ${result} ; ${C/10} ${Math.abs(L/5)} ${D}`);
                
                output.push(["O".repeat(C/10), "|".repeat(Math.abs(L/5)), ".".repeat(D)].filter(Boolean).join("")); // Add C, L, D representation in output array

                previousD = D;
            }

            if (resultSegment.length > 0) {
                results.push(resultSegment.join(' '));
            }
            // E
            let formattedResults = results.join(' ');
            document.getElementById('cldResult').innerHTML = formattedResults; // Display number CLD output here
            document.getElementById('cldDetails').innerHTML = details.join('<br>');
            document.getElementById('cldOutput').innerHTML = output.filter(Boolean).join(' / '); // Display C, L, D representation with "/" separator and no extra slashes
        }
    </script>
</body>
</html>
